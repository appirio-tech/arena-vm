<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                           http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
                           http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">
                           
	<context:component-scan base-package="com.appirio.commons"/>
	<context:component-scan base-package="com.topcoder.arena"/>
	<context:component-scan base-package="com.topcoder.server.farm"/>
	
	<bean id="awsCredProvider" class="com.amazonaws.auth.DefaultAWSCredentialsProviderChain"/>
	
	<bean id="awsClientConfig" class="com.amazonaws.ClientConfiguration">
		<property name="maxConnections" value="50"/>
	</bean>
	
	<bean id="sqsClient" class="com.amazonaws.services.sqs.AmazonSQSClient">
		<constructor-arg ref="awsCredProvider" />
		<constructor-arg ref="awsClientConfig"/>
		<property name="endpoint" value="#{systemProperties['arena.sqs-endpoint'] ?: 'http://sqs.us-east-1.amazonaws.com'}"/>
	</bean>
	
	<bean id="s3Client" class="com.amazonaws.services.s3.AmazonS3Client">
		<constructor-arg ref="awsCredProvider" />
		<constructor-arg ref="awsClientConfig"/>
	</bean>
	
	<bean id="environmentConfig" class="com.topcoder.farm.controller.configuration.EnvironmentConfig">
		<property name="prefix" value="#{systemProperties['arena.env-prefix']}"/>
		<property name="appServiceName" value="ArenaCode"/>
	</bean>
	
	<bean id="controllerServices" class="com.topcoder.farm.controller.services.ControllerServicesImpl">
		<property name="maxBulkSize" value="100"/>
		<property name="maxSharedObjectStorageTime" value="1800000"/>
	</bean>
	
	<bean id="codeServiceConfig" class="com.topcoder.arena.code.CodeServiceConfiguration">
		<property name="resultQueueName" value="proc-results"/>
		<property name="resultMonitorInterval" value="#{systemProperties['arena.result-monitor-interval'] ?: 1000}"/>
		<property name="maxMonitorMessages" value="10"/>
		<property name="syncCheckInterval" value="#{systemProperties['arena.result-check-interval'] ?: 1000}"/>
	</bean>
	
</beans>